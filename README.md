# ColdDream Travel (西游纪行)

## 项目简介
ColdDream Travel 是一个基于 .NET 8 Web API 和 Uni-app (Vue 3 + TypeScript) 开发的跨平台旅游预订系统。本项目旨在提供极致的用户体验，支持微信小程序和 H5 平台。

## 当前进度 (Current Progress)

### 后端 (ColdDream.Api)
- **核心架构**: 基于 .NET 8，采用 Controller-Service-Repository 分层架构。
- **数据库**: 使用 SQL Server，Entity Framework Core 进行 ORM 映射。
- **功能模块**:
  - [x] **用户认证**: 集成 ASP.NET Core Identity，支持 JWT 令牌认证。
  - [x] **旅游路线**: 实现路线的 CRUD，支持私密路线鉴权。
  - [x] **预订系统**: 完整的预约流程，自动生成订单号，计算总价。
  - [x] **管家服务**: 管家管理及与路线的多对多关联。
  - [x] **排行榜**: 集成 Redis 实现高性能的热门路线排行榜。
  - [x] **积分商城**: 商品管理及积分兑换逻辑（包含事务处理）。
- **基础设施**:
  - [x] 配置 CORS 解决跨域问题。
  - [x] 集成 Serilog 日志系统。
  - [x] Swagger API 文档。

### 前端 (ColdDream.UniApp)
- **技术栈**: Uni-app, Vue 3, TypeScript, Vite, Pinia, Sass。
- **UI 重构**:
  - [x] **首页**: 沉浸式自定义导航栏，轮播图，金刚区导航，横向滚动排行榜，瀑布流路线列表。
  - [x] **个人中心**: 全新 UI 设计，包含用户信息卡片、积分商城入口、常用功能菜单。
  - [x] **路线详情**: 优化的视觉体验，支持立即预约。
  - [x] **登录页**: 适配微信小程序，支持手机号一键登录（模拟）。
- **功能实现**:
  - [x] 封装统一的 HTTP 请求工具 (拦截器、错误处理)。
  - [x] 基于 Pinia 的用户状态管理。
  - [x] 移除独立的“排行榜” Tab，整合至首页和个人中心。
  - [x] 积分商城入口调整至个人中心。

## 后续优化方向 (Roadmap)

### 1. 功能完善
- **支付集成**: 接入微信支付/支付宝，实现真实的支付流程。
- **订单管理**: 开发“我的订单”页面，支持查看订单详情、取消订单、评价等。
- **真实登录**: 对接微信后端 API，实现真正的 `code2Session` 和手机号解密。
- **优惠券系统**: 完善优惠券的领取与核销逻辑。

### 2. 性能与体验
- **图片优化**: 引入 CDN，实现图片懒加载和压缩。
- **骨架屏**: 在数据加载期间展示骨架屏，提升用户等待体验。
- **下拉刷新/上拉加载**: 在所有列表页完善分页加载体验。

### 3. 后台管理
- 开发独立的 Web 管理后台，用于管理路线、管家、订单和用户数据。

### 4. 测试与部署
- **单元测试**: 补充后端核心业务逻辑的单元测试。
- **CI/CD**: 配置自动化构建与部署流程。
- **多端适配**: 进一步优化 H5 端体验，确保与小程序一致性。

## 运行指南

### 后端
```bash
cd ColdDream.Api
dotnet run
```
服务默认运行在 `http://localhost:5116`。

### 前端
```bash
cd ColdDream.UniApp
npm install
npm run dev:mp-weixin  # 运行微信小程序
# 或
npm run dev:h5         # 运行 H5
```
